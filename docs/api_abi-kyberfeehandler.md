---
id: API_ABI-KyberFeeHandler
title: KyberFeeHandler
---
[//]: # (tagline)
# contract KyberFeeHandler

is [IKyberFeeHandler](api_abi-ikyberfeehandler.md), Utils5, DaoOperator, ReentrancyGuard\
imports Utils5, ReentrantcyGuard, [IKyberDao](api_abi-ikyberdao.md), [IKyberFeeHandler](api_abi-ikyberfeehandler.md), [IKyberNetworkProxy](api_abi-ikybernetworkproxy.md), [ISimpleKyberProxy](api_abi-isimplekyberproxy.md), [IBurnableToken](api_abi-iburnabletoken.md), [ISanityRate](api_abi-isanityrate.md), SafeMath, DaoOperator

*Source*: [KyberFeeHandler.sol](https://github.com/KyberNetwork/smart-contracts/blob/master/contracts/KyberFeeHandler.sol)
___

## INDEX

<AUTOGENERATED_TABLE_OF_CONTENTS>

## REFERENCE

### Events

### `FeeDistributed`
Event for logging the rewards paid.
___
event __FeeDistributed__(IERC20 token, address platformWallet, uint256 platformFeeWei, uint256 rewardWei, uint256 rebateWei, address[] rebateWallets, uint256[] rebatePercentBpsPerWallet, uint256 burnAmtWei)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `token` | contract IERC20 | ERC20 token address |
| `platformWallet` | address | address receiving the platform fee |
| `platformFeeWei` | uint256 | platform fees distributed in wei |
| `rewardWei` | uint256 | rewards distributed in wei |
| `rebateWei` | uint256 | rebates distributed in wei |
| `rebateWallets` | address[] | address receiving the reabtes |
| `rebatePercentBpsPerWallet` | uint256[] | rebate percentage in BPS per wallet |
| `burnAmtWei` | uint256 | burned amount in wei |
Signature: `0x53e2e1b5ab64e0a76fcc6a932558eba265d4e58c512401a7d776ae0f8fc08994`

<br />

### `BRRUpdated`
Event for logging the update of the BRR values.
___
event __BRRUpdated__(uint256 rewardBps, uint256 rebateBps, uint256 burnBps, uint256 expiryTimestamp, uint256 epoch)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `rewardBps` | uint256 | reward settings in BPS |
| `rebateBps` | uint256 |  settings in BPS |
| `burnBps` | uint256 | burn settings in BPS |
| `expiryTimestamp` | uint256 | timestamp when the settings will expire |
| `epoch` | uint256 | epoch when the settings was set |
Signature: 0x4b3150a36b957ed95a132721c7412af319174861da7c8c7a55ef6e1a2794528d

<br />

### `EthReceived`
Event logging the receiving of ETH in the FeeHandler.
___
event __EthReceived__(uint256 amount)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `amount` | uint256 | amount of ETH received in wei |
 Signature: 0x353bcaaf167a6add95a753d39727e3d3beb865129a69a10ed774b0b899671403

<br />

### `KyberDaoAddressSet`
Event logging the setting of the KyberDao address.
___
event __KyberDaoAddressSet__(IKyberDao kyberDao)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `kyberDao` | IKyberDao | KyberDao contract address |
Signature: 0x6792eb8fe9de88d4eaaee7128e99aede17da98cd391520d3ec51a365804722c4

<br />

### `BurnConfigSet`
Event logging the setting of the burn configuration.
___
event __BurnConfigSet__(ISanityRate sanityRate, uint256 weiToBurn)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `sanityRate` | ISanityRate | SanityRates contract address |
| `weiToBurn` | uint256 | amount of wei to burn |
Signature: 0xe40f97f23269c4682610e9b2522d6d4272ee56f115906d71fcb3da82a860f755

<br />

### `RewardsRemovedToBurn`
Event logging the removed rewards for burning.
___
event __RewardsRemovedToBurn__(uint256 epoch, uint256 rewardsWei)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `epoch`   | uin256  | epoch number when event was emitted |
| `rewardsWei` | uint256 | removed rewards in wei to burn |
 Signature: 0x11c852d8be537f120b8d4b4d5c3c211870522fd96a8bd9fa51d102774077a51b

<br />

### `KyberNetworkUpdated`
Event logging the the setting of the network contract address.
___
event __KyberNetworkUpdated__(address kyberNetwork)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `kyberNetwork` | address | KyberNetwork contract address |
Signature: 0x18970d46ac8a7d7e0da90e1bebb0be3e87ffc7705fc09d3bba5373d59b7a12aa

<br />

### `KyberProxyUpdated`
event logging the updating of the proxy contract address.
___
event __KyberProxyUpdated__(IKyberProxy kyberProxy)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `kyberProxy` | IKyberProxy | IKyberProxy contract address |
Signature: 0x8457f9bd0d13488a6c265af376d291f3c6bd2311d9e8dee5671d4169ca6e0ae0

<br />

### Functions

### `receive`
Emits EthReceived event when ETH is received in the contract.
___
function __receive__() external payable
---

<br />
 
### `handleFees`
Handles the fees when a trade happens in the network, unless the trade is not involving any fees.
___
function __handleFees__(IERC20 token, address[] rebateWallets, uint256[] rebateBpsPerWallet, address platformWallet, uint256 platformFee, uint256 networkFee) external payable override onlyKyberNetwork nonReentrant
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `token` | contract IERC20 | //TODO:    |
| `rebateWallets` | address[] | //TODO:    |
| `rebateBpsPerWallet` | uint256[] | //TODO:    |
| `platformWallet` | address | //TODO:    |
| `platformFee` | uint256 | //TODO:    |
| `networkFee` | uint256 | //TODO:    |
 

- `token`: Token currency of fees

- `rebateWallets`: a list of rebate wallets that will get rebate for this trade.

- `rebateBpsPerWallet`: percentage of rebate for each wallet, out of total rebate.

- `platformWallet`: Wallet address that will receive the platfrom fee.

- `platformFee`: Fee amount (in wei) the platfrom wallet is entitled to.

- `networkFee`: Fee amount (in wei) to be allocated for BRR
 

---

<br />
 
### `claimStakerReward`
//TODO: not revert if already claimed or reward percentage is 0
allow writing a wrapper to claim for multiple epochs

___
function __claimStakerReward__(address staker, uint256 epoch) external returns (uint256 amountWei)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `staker` | address | //TODO:    |
| `epoch` | uint256 | //TODO:    |
 

- `staker`: address.

- `epoch`: for which epoch the staker is claiming the reward
**Returns:**\
uint256 amountWei
 

---

<br />
 
### `claimReserveRebate`
//TODO: claim rebate per reserve wallet. called by any address

___
function __claimReserveRebate__(address rebateWallet) external returns (uint256 amountWei)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `rebateWallet` | address | //TODO:    |
 

- `rebateWallet`: the wallet to claim rebates for. Total accumulated rebate sent to this wallet.

**Returns:**\
uint256 amountWei
- amountWei amount of rebate claimed
 

---

<br />
 
### `claimPlatformFee`
//TODO: claim accumulated fee per platform wallet. Called by any address

___
function __claimPlatformFee__(address platformWallet) external returns (uint256 amountWei)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `platformWallet` | address | //TODO:    |
 

- `platformWallet`: the wallet to claim fee for. Total accumulated fee sent to this wallet.

**Returns:**\
uint256 amountWei
- amountWei amount of fee claimed
 

---

<br />
 
### `setDaoContract`
//TODO: set kyberDao contract address once and set setter address to zero.

___
function __setDaoContract__(contract IKyberDao _kyberDao) external
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `_kyberDao` | contract IKyberDao | //TODO:    |
 

- `_kyberDao`: kyberDao address.
 

---

<br />
 
### `setNetworkContract`
//TODO: set new kyberNetwork address by daoOperator

___
function __setNetworkContract__(address _kyberNetwork) external
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `_kyberNetwork` | address | //TODO:    |
 

- `_kyberNetwork`: new kyberNetwork contract
 

---

<br />
 
### `setKyberProxy`
//TODO: Allow to set kyberNetworkProxy address by daoOperator

___
function __setKyberProxy__(contract IKyberProxy _newProxy) external
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `_newProxy` | contract IKyberProxy | //TODO:    |
 

- `_newProxy`: new kyberNetworkProxy contract
 

---

<br />
 
### `setBurnConfigParams`
//TODO: set knc sanity rate contract and amount wei to burn

___
function __setBurnConfigParams__(contract ISanityRate _sanityRate, uint256 _weiToBurn) external
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `_sanityRate` | contract ISanityRate | //TODO:    |
| `_weiToBurn` | uint256 | //TODO:    |
 

- `_sanityRate`: new sanity rate contract

- `_weiToBurn`: new amount of wei to burn
 

---

<br />
 
### `burnKnc`
//TODO: Burn knc. The burn amount is limited. Forces block delay between burn calls.
only none ontract can call this function

___
function __burnKnc__() external returns (uint256 kncBurnAmount)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
 

**Returns:**\
uint256 kncBurnAmount
- kncBurnAmount amount of knc burned
 

---

<br />
 
### `makeEpochRewardBurnable`
//TODO: if no one voted for an epoch (like epoch 0), no one gets rewards - should burn it.
Will move the epoch reward amount to burn amount. So can later be burned.
calls kyberDao contract to check if there were any votes for this epoch.

___
function __makeEpochRewardBurnable__(uint256 epoch) external
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
| `epoch` | uint256 | //TODO:    |
 

- `epoch`: epoch number to check.
 

---

<br />
 
### `getSanityRateContracts`
//TODO: returns list of sanity rate contracts
index 0 is currently used contract address, indexes > 0 are older versions
___
function __getSanityRateContracts__() external returns (contract ISanityRate[] sanityRates)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
 

**Returns:**\
contract ISanityRate[] sanityRates
 

---

<br />
 
### `getLatestSanityRate`
//TODO: return latest knc/eth rate from sanity rate contract
___
function __getLatestSanityRate__() external returns (uint256 kncToEthSanityRate)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
 

**Returns:**\
uint256 kncToEthSanityRate
 

---

<br />
 
### `getBRR`
//TODO: 
___
function __getBRR__() public returns (uint256 rewardBps, uint256 rebateBps, uint256 epoch)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
 

**Returns:**\
uint256 rewardBps, uint256 rebateBps, uint256 epoch
 

---

<br />
 
### `readBRRData`
//TODO: 
___
function __readBRRData__() public returns (uint256 rewardBps, uint256 rebateBps, uint256 expiryTimestamp, uint256 epoch)
| Parameter | Type  | Description |
| --------- |:-----:|:-----------:|
 

**Returns:**\
uint256 rewardBps, uint256 rebateBps, uint256 expiryTimestamp, uint256 epoch
